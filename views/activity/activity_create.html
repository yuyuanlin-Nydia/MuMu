<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>音樂祭資訊曝光</title>
    <link rel="stylesheet" href="../css/Bootstrap/bootstrap.css">
    <script src="../js/jquery.js"></script>
    <script src="../js/Bootstrap/bootstrap.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>

<body>
    <!-- 導覽列 開始 -->

    <!-- 導覽列 結束 -->
    <div class="container">
        <form id="form" method="POST" action="">
            <div class="row justify-content-center">
                <!-- 左側 -->
                <div class="col-md-3 ml-5 mr-5">
                    <h4 class="title">發起音樂會</h4>
                    <div class="form-group row">
                        <label for="activityTitle" class="col-md-12">音樂會主題</label>
                        <div class="col-md-12">
                            <input class="form-control" id="activityTitle" name="activityTitle" type="text">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="time" class="col-md-12">時間</label>
                        <div class="col-md-12">
                            <input class="form-control" id="time" name="time" type="datetime-local">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="address" class="col-md-12">地點</label>
                        <div class="col-md-6 mb-2">
                            <select class=" form-control" name="districtId" id="districtId">
                                <option value="台北市">台北市</option>
                                <option value="台中市">台中市</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-2">
                            <select class="form-control" id="areaId" name="areaId">
                                <option value="南屯區">南屯區</option>
                                <option value="潭子區">潭子區</option>
                            </select>
                        </div>
                        <div class="col-md-12">
                            <input class="form-control" type="text" name="activityAddress">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="musicType" class="col-md-12">音樂類型</label>
                        <div class="col-md-12">
                            <select class=" form-control" name="musicType" id="musicType">
                                <option value="交響樂">交響樂</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="maximum" class="col-md-12">人數上限</label>
                        <div class="col-md-12">
                            <input class="form-control" type="number" value="50" id="maxNum" name="maxNum">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="price" class="col-md-12">票價</label>
                        <div class="col-md-12">
                            <input class="form-control" type="text" id="price" name="price">
                        </div>
                    </div>

                </div>
                <!-- 右側 -->
                <div class="col-md-7">
                    <div class="form-group row">
                        <div class="col-md-10 text-center" v-if="preview">
                            <img id="preview_img" :src="preview" alt="">
                            <input class="form-control" type="file" id="activityFile" name="activityFile"
                                accept="image/jpeg image/jpg image/png" @change="previewImage">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="activities" class="col-md-12">音樂會內容</label>
                        <div class="col-md-10">
                            <textarea class="form-control" name="activityContent" id="activityContent"
                                rows="8"></textarea>
                        </div>
                    </div>
                    <div class="form-group row ">
                        <div class="col-md-12">
                            <br>
                        </div>
                        <div class="col-md-10  text-center">
                            <input class="btn btn-primary mr-2" type="submit" value="預覽">
                            <input id="submitBtn" class="btn btn-secondary" type="button" value="上傳">
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>


    <!-- 頁尾  開始-->

    <!-- 頁尾  結束-->

    <script>
        // 頭像預覽
        //    var app1 = new Vue({
        //        el:"",
        //        data: function() {
        //            return {
        //                preview: null,
        //                image: null
        //            };

        //        },
        //        methods: {
        //         previewImage: function(event) {
        //             var input = event.target;
        //             // 獲得觸發事件的元素
        //             if (input.files) {
        //                 var reader = new FileReader();
        //                 reader.onload = (e) => {
        //                     this.preview = e.target.result;
        //                 }
        //                 this.image=input.file[0];
        //                 reader.readAsDataURL(input.files[0]);
        //             }
        //         }
        //        }
        //    });



        $(function () {


            // function Edit(id) {
            //     $.ajax({
            //         url: "/detail/" + id,
            //         type: "GET",
            //         success: function (res) {
            //             var res = JSON.parse(res)
            //             //將值傳遞進input裏頭
            //             $("input[name='id']").val(res.data.id)
            //             $("input[name='name']").val(res.data.name)
            //             $("input[name='phone']").val(res.data.phone)
            //             $("input[name='address']").val(res.data.address)
            //             $("input[name='adult_mask']").val(res.data.adult_mask)
            //             $("input[name='child_mask']").val(res.data.child_mask)
            //         },
            //         error: function () {
            //             alert("系統錯誤!")
            //         },
            //     })
            // }

            // function Delete(id) {
            //     var JSONData = { "id": id }
            //     JSONData = JSON.stringify(JSONData)
            //     $.ajax({
            //         url: "/delete",
            //         type: "POST",
            //         contentType: "application/json; charset=utf-8",
            //         data: JSONData,
            //         success: function (res) {
            //             var res = JSON.parse(res)
            //             if (res.errno === 1) {
            //                 alert("刪除成功!")
            //                 location.reload()
            //             } else if (res.errno === 0) {
            //                 alert("刪除失敗!")
            //             }
            //         },
            //         error: function () {
            //             alert("系統錯誤!")
            //         }
            //     })
            // }





            $('#submitBtn').click(function () {
                // x = $('#form').serializeArray();
                // $.each(x, function (i, field) {
                //     alert(field.name + ":" + field.value + " ");
                // });

                //整理表單資料到變數
                var data = $('#form').serializeArray()
                JSONData = serializeToJSON(data)

                // $.ajax({
                //     url: "/update",
                //     type: "POST",
                //     contentType: "application/json; charset=utf-8",
                //     data: JSONData,
                //     success: function (res) {
                //         var res = JSON.parse(res)
                //         if (res.errno === 1) {
                //             alert("更新成功!")
                //             location.reload()
                //         } else if (res.errno === 0) {
                //             alert("更新失敗!")
                //         }
                //     },
                //     error: function () {
                //         alert("系統錯誤!")
                //     }
                // })

            });

            function serializeToJSON(data) {
                var values = {};
                for (index in data) {
                    values[data[index].name] = data[index].value;
                }
                console.log(values);
                // typeof_values = object
                return JSON.stringify(values)
            }
        })


        // $('#submitBtn').on('click', function() {
        //     //整理表單資料到變數
        //     var data = $('#form').serializeArray()
        //     JSONData = serializeToJSON(data)


        // })

        // function serializeToJSON(data) {
        //     var values = {};
        //     for(index in data){
        //         values[data[index].name] = data[index].value;
        //     }
        //     return JSON.stringify(values)
        // }



    </script>


</body>

</html>